<section class='newsletter_component'>
  <%= form_tag new_newsletter_path, id: 'newsletter', method: 'get' do %>
    <%= flash_message modal: true %>
    <% if @comp.nil? || !@comp.publish %>
      <p><%= t('.message_error') %></p>
      <%= link_to t('.back'), root_path, class: 'btn btn-danger' %>
    <% else %>
      <label><%= params[:opt] == 'delete' ? Weby::Components.factory(@comp).delete_text : Weby::Components.factory(@comp).text %></label>
      <%= hidden_field_tag :opt, params[:opt] == 'delete' ? 'delete' : 'new' %>
      <%= email_field_tag :email, nil, placeholder: t('.email') %>
      <%= submit_tag params[:opt] == 'delete' ? t('.delete') : Weby::Components.factory(@comp).button_text, class: 'newsletter_submit' %>
    <% end %>
  <% end %>
</section>

